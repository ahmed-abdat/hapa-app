/* HAPA Government Authority Admin Panel Branding */
/* Following official Payload CMS + Tailwind + shadcn/ui patterns */

@layer payload-default {
  /* shadcn/ui CSS Variables - MUST be global for portal components */
  :root {
  /* shadcn/ui theme variables - accessible globally including portals */
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;
  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 222.2 84% 4.9%;

  /* HAPA Brand Colors using HSL for consistency */
  --primary: 142 45% 31%; /* #138B3A - HAPA Primary Green */
  --primary-foreground: 0 0% 98%;
  --secondary: 60 90% 50%; /* #E6E619 - HAPA Bright Yellow */
  --secondary-foreground: 222.2 47% 11.2%;

  --muted: 210 40% 96.1%;
  --muted-foreground: 215.4 16.3% 46.9%;
  --accent: 210 40% 96.1%;
  --accent-foreground: 222.2 47% 11.2%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 210 40% 98%;
  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --ring: 222.2 84% 4.9%;
  --radius: 0.5rem;

  /* Chart colors for dashboard */
  --chart-1: 12 76% 61%;
  --chart-2: 173 58% 39%;
  --chart-3: 197 37% 24%;
  --chart-4: 43 74% 66%;
  --chart-5: 27 87% 67%;

  /* HAPA Legacy Brand Colors (for backward compatibility) */
  --hapa-primary: #138b3a;   /* HAPA Primary Green */
  --hapa-secondary: #e6e619; /* HAPA Bright Yellow */
  --hapa-accent: #0f7a2e;    /* HAPA Dark Green Accent */
  --hapa-light: #f8f9fa;     /* Light background */
  --hapa-text: #111827;      /* Professional text */
}

/* Dark mode support - Payload uses [data-theme="dark"] */
[data-theme="dark"] {
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;
  --card: 222.2 84% 4.9%;
  --card-foreground: 210 40% 98%;
  --popover: 222.2 84% 4.9%;
  --popover-foreground: 210 40% 98%;
  --primary: 142 45% 31%; /* Keep HAPA green even in dark mode */
  --primary-foreground: 210 40% 98%;
  --secondary: 60 90% 50%; /* Keep HAPA yellow */
  --secondary-foreground: 222.2 47% 11.2%;
  --muted: 217.2 32.6% 17.5%;
  --muted-foreground: 215 20.2% 65.1%;
  --accent: 217.2 32.6% 17.5%;
  --accent-foreground: 210 40% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 210 40% 98%;
  --border: 217.2 32.6% 17.5%;
  --input: 217.2 32.6% 17.5%;
  --ring: 212.7 26.8% 83.9%;
  }
}

@layer payload {
  /* Customize Payload admin interface with HAPA branding */
  .payload-admin {
  /* Main navigation bar */
  .nav {
    background-color: var(--hapa-primary) !important;
    border-bottom: 3px solid var(--hapa-secondary);
  }

  /* Primary buttons and accents */
  .btn--style-primary,
  .btn--style-pill,
  .ReactModal__Content .btn--style-primary {
    background-color: var(--hapa-primary) !important;
    border-color: var(--hapa-primary) !important;

    &:hover {
      background-color: var(--hapa-accent) !important;
      border-color: var(--hapa-accent) !important;
    }
  }

  /* Secondary buttons */
  .btn--style-secondary {
    background-color: var(--hapa-secondary) !important;
    border-color: var(--hapa-secondary) !important;
    color: var(--hapa-text) !important;

    &:hover {
      background-color: var(--hapa-accent) !important;
      border-color: var(--hapa-accent) !important;
      color: white !important;
    }
  }

  /* Links and navigation items */
  .nav__link,
  .nav__link--active {
    color: white !important;

    &:hover {
      background-color: rgba(255, 255, 255, 0.1) !important;
    }
  }

  /* Active navigation states */
  .nav__link--active {
    background-color: var(--hapa-secondary) !important;
    color: var(--hapa-text) !important;
  }

  /* Form controls and inputs */
  .input,
  .textarea,
  .select__control {
    border-color: var(--hapa-primary) !important;

    &:focus {
      border-color: var(--hapa-secondary) !important;
      box-shadow: 0 0 0 1px var(--hapa-secondary) !important;
    }
  }

  /* Sidebar branding */
  .template-default .nav {
    background: linear-gradient(
      135deg,
      var(--hapa-primary) 0%,
      var(--hapa-accent) 100%
    );
  }

  /* Header customization */
  .app-header {
    background-color: var(--hapa-light) !important;
    border-bottom: 2px solid var(--hapa-secondary);
  }

  /* Collection and global labels */
  .nav__label {
    font-weight: 600;
    color: white !important;
  }

  /* Dashboard tiles and cards */
  .card,
  .dashboard__card {
    border: 1px solid var(--hapa-secondary);

    &:hover {
      box-shadow: 0 4px 12px rgba(6, 89, 134, 0.15);
    }
  }

  /* Status indicators */
  .status-indicator--published {
    background-color: var(--hapa-accent) !important;
  }

  /* Localization language tabs */
  .tabs__nav-item {
    position: relative;

    &--active {
      border-bottom-color: var(--hapa-secondary) !important;
      color: var(--hapa-primary) !important;
      font-weight: 600;
    }

    /* Add language flags/indicators */
    &[data-label*="FranÃ§ais"]::before {
      content: "ðŸ‡«ðŸ‡·";
      margin-right: 0.5rem;
    }

    &[data-label*="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"]::before {
      content: "ðŸ‡²ðŸ‡·";
      margin-right: 0.5rem;
    }
  }

  /* Localization status indicators */
  .locale-status {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    margin-left: 0.5rem;

    &--complete {
      color: var(--hapa-accent);
    }

    &--incomplete {
      color: #e74c3c;
    }

    &--empty {
      color: #95a5a6;
    }
  }

  /* Enhanced language switching experience */
  .tabs__nav {
    background: rgba(248, 249, 250, 0.8);
    border-radius: 6px;
    padding: 0.25rem;
    margin-bottom: 1rem;
    border: 1px solid var(--hapa-secondary);
  }

  .tabs__nav-item {
    border-radius: 4px;
    padding: 0.5rem 1rem;
    transition: all 0.2s ease;

    &:hover {
      background-color: rgba(212, 165, 116, 0.1);
    }

    &--active {
      background-color: white;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
  }

  /* Rich text editor toolbar */
  .rich-text-lexical .toolbar {
    border-color: var(--hapa-primary) !important;
  }

  /* File upload areas */
  .upload__area {
    border-color: var(--hapa-primary) !important;

    &:hover {
      border-color: var(--hapa-secondary) !important;
      background-color: rgba(212, 165, 116, 0.05);
    }
  }
}

/* Arabic RTL Support */
.payload-admin[dir="rtl"] {
  /* RTL-specific navigation adjustments */
  .nav {
    text-align: right;
  }

  /* RTL form layouts */
  .field-type-text,
  .field-type-textarea {
    direction: rtl;
    text-align: right;
  }

  /* RTL button alignments */
  .form-actions {
    justify-content: flex-start;
  }
}

/* French Government Typography */
.payload-admin[lang="fr"] {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, sans-serif;
}

/* Arabic Government Typography */
.payload-admin[lang="ar"] {
  font-family: "Noto Sans Arabic", "Arabic UI Text", "SF Arabic", "Segoe UI",
    Arial, sans-serif;

  /* Arabic text improvements */
  .input,
  .textarea {
    font-size: 16px;
    line-height: 1.6;
  }
}

/* HAPA Specific Welcome Message Styling */
.dashboard__welcome {
  background: linear-gradient(
    135deg,
    var(--hapa-light) 0%,
    rgba(212, 165, 116, 0.1) 100%
  );
  border: 1px solid var(--hapa-secondary);
  border-radius: 8px;
  padding: 2rem;

  h1 {
    color: var(--hapa-primary) !important;
    font-weight: 700;
  }

  p {
    color: var(--hapa-text) !important;
  }
}

  /* HAPA Specific Welcome Message Styling */
  .dashboard__welcome {
    background: linear-gradient(
      135deg,
      var(--hapa-light) 0%,
      rgba(212, 165, 116, 0.1) 100%
    );
    border: 1px solid var(--hapa-secondary);
    border-radius: 8px;
    padding: 2rem;

    h1 {
      color: var(--hapa-primary) !important;
      font-weight: 700;
    }

    p {
      color: var(--hapa-text) !important;
    }
  }

  /* Fix z-index conflicts with Payload admin elements */
  .payload-admin [data-radix-portal] {
    z-index: 9999 !important;
  }
}

/* shadcn/ui Portal Component Fixes - Higher priority layer */
@layer payload {
  /* Ensure modals and dropdowns render correctly in Payload admin */
  [data-radix-portal] {
    /* Ensure portal elements use correct CSS variables */
    --background: var(--background);
    --foreground: var(--foreground);
    --card: var(--card);
    --card-foreground: var(--card-foreground);
    --popover: var(--popover);
    --popover-foreground: var(--popover-foreground);
    --primary: var(--primary);
    --primary-foreground: var(--primary-foreground);
    --secondary: var(--secondary);
    --secondary-foreground: var(--secondary-foreground);
    --muted: var(--muted);
    --muted-foreground: var(--muted-foreground);
    --accent: var(--accent);
    --accent-foreground: var(--accent-foreground);
    --destructive: var(--destructive);
    --destructive-foreground: var(--destructive-foreground);
    --border: var(--border);
    --input: var(--input);
    --ring: var(--ring);
    --radius: var(--radius);
  }

  /* Ensure dialog overlays and content have proper positioning */
  [data-radix-dialog-overlay] {
    position: fixed !important;
    inset: 0 !important;
    z-index: 9999 !important;
  }

  [data-radix-dialog-content] {
    position: fixed !important;
    left: 50% !important;
    top: 50% !important;
    z-index: 10000 !important;
    transform: translate(-50%, -50%) !important;
  }
}
